<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules" default="stop_ts">
	<property name="app.package" value="org.cny.cny4a" />
	<target name="start_ts">
		<exec executable="/bin/bash" dir="./TServer" failonerror="true">
			<arg value="-xe" />
			<arg value="build" />
		</exec>
		<exec executable="/bin/bash" dir="./TServer" failonerror="true">
			<arg value="-xe" />
			<arg value="run_srv" />
			<arg value="start" />
		</exec>
	</target>
	<target name="stop_ts">
		<exec executable="/bin/bash" dir="./TServer" failonerror="false">
			<arg value="-xe" />
			<arg value="run_srv" />
			<arg value="stop" />
		</exec>
		<exec executable="killall" dir="./TServer" failonerror="false">
			<arg value="TServer" />
		</exec>
	</target>
	<target name="fetch-test-report">
		<echo>Downloading XML test report...</echo>
		<exec executable="${adb}" failonerror="true">
			<arg line="${adb.device.arg}" />
			<arg value="pull" />
			<arg value="/data/data/${app.package}/files/junit-report.xml" />
			<arg value="bin/junit-report.xml" />
		</exec>
	</target>
</project>